# 도로명주소DB 레이아웃 (도로명주소 한글)

## 1. 도로명주소 한글 전체분(변동분) 레이아웃

| 순번 | 컬럼명             | 크기(byte) | 형식 | 비고                                 |
| ---- | ------------------ | ---------- | ---- | ------------------------------------ |
| 1    | 도로명주소관리번호 | 26         | 문자 | PK1                                  |
| 2    | 법정동코드         | 10         | 문자 |                                      |
| 3    | 시도명             | 40         | 문자 |                                      |
| 4    | 시군구명           | 40         | 문자 |                                      |
| 5    | 법정읍면동명       | 40         | 문자 |                                      |
| 6    | 법정리명           | 40         | 문자 |                                      |
| 7    | 산여부             | 1          | 문자 | 0:대지, 1:산                         |
| 8    | 지번본번(번지)     | 4          | 숫자 |                                      |
| 9    | 지번부번(호)       | 4          | 숫자 |                                      |
| 10   | 도로명코드         | 12         | 문자 | PK2 (시군구코드(5) + 도로명번호(7))  |
| 11   | 도로명             | 80         | 문자 |                                      |
| 12   | 지하여부           | 1          | 문자 | PK3 (0:지상, 1:지하, 2:공중, 3:수상) |
| 13   | 건물본번           | 5          | 숫자 | PK4                                  |
| 14   | 건물부번           | 5          | 숫자 | PK5                                  |
| 15   | 행정동코드         | 60         | 문자 | 참고용                               |
| 16   | 행정동명           | 60         | 문자 | 참고용                               |
| 17   | 기초구역번호       | 5          | 문자 | 우편번호                             |
| 18   | 이전도로명주소     | 400        | 문자 |                                      |
| 19   | 효력발생일         | 8          | 문자 |                                      |
| 20   | 공동주택구분       | 1          | 문자 |                                      |
| 21   | 이동사유코드       | 2          | 문자 | 31: 신규, 34: 수정, 63: 폐지         |
| 22   | 건축물대장건물명   | 400        | 문자 |                                      |
| 23   | 시군구용건물명     | 400        | 문자 |                                      |
| 24   | 비고               | 200        | 문자 |                                      |

> 참고:
>
> - 전체자료는 시도별로 구분 제공됩니다.
> - 이동사유코드: 31(INSERT), 34(UPDATE), 63(DELETE)

---

## 2. 도로명주소 한글 현행화 SQL 예시

```sql
/*
- 신규분외에 누락된 자료가 있을 경우를 위해 UPDATE 후 INSERT하도록 구현
*/
UPDATE 도로명주소_한글 A
  SET (A.법정동코드, A.시도명, A.시군구명, ……) =
  (SELECT B.법정동코드, B.시도명, B.시군구명, …… FROM 도로명주소_한글_변경분 B
  		WHERE A.도로명관리번호 = B.도로명관리번호 AND B.이동사유코드 IN ('31', '34') AND ROWNUM = 1)
WHERE EXISTS (SELECT 1 FROM 도로명주소_한글_변경분 C WHERE C.도로명관리번호 = A.도로명관리번호 AND C.이동사유코드 IN ('31', '34'))

INSERT INTO 도로명주소_한글 (도로명관리번호, 법정동코드, 시도명……)
SELECT A.도로명관리번호, A.법정동코드, A.시도명 …… FROM 도로명주소_한글_변경분 A
 WHERE A.이동사유코드 IN ('31', '34') AND NOT EXISTS (SELECT 1 FROM 도로명주소_한글 B WHERE B.도로명관리번호 = A.도로명관리번호)
```
